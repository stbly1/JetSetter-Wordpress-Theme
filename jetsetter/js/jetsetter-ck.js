/*
 Main Page JS file for the WordPress Theme @JetSetter
*/function sizeImage(){var e;if($(window).width()<600){isHandheldDevice?imageHeight=$(window).height()+100:imageHeight="100%";$("#background-image-container").css({height:imageHeight})}else{imageHeight=$(window).height()+$(window).height()*.1;$("#background-image-container").css({height:imageHeight});$("#background-image-container").css({"margin-top":"0px"})}$(".background-image").each(function(){var e=$(this).css("backgroundImage");$(this).css({height:imageHeight});$(this).css({backgroundImage:e})})}function resizeObjects(){if(!siteInit){siteInit=!0;fadeSite()}i=0;sizeObjects(".region",".region-title",20);sizeObjects(".nav-item",".nav-item-title");$(".post-preview").each(function(){i++;var e=$(this).width(),t=$("#title",this).width(),n=$("#excerpt",this).width();$(window).width()<=600?$("#excerpt",this).css({width:"100%"}):$("#excerpt",this).css({width:e-t-2+"px"})});if(currentAnimation1==null){$("#post-container").css({height:$("#post-preview-"+currentNumber).height()+15});$("#current-post-container").css({height:$("#post-preview-"+currentNumber).height()+15})}isHandheldDevice||sizeImage();$(window).width()<600&&$("#selector").css({"margin-top":"50"});fontSize=36;if($("#tagline").length>0){$("#tagline").css({"font-size":fontSize});while($("#tagline span").width()>=$("#tagline").width()){fontSize-=1;$("#tagline").css({"font-size":fontSize})}$("#tagline").css({"margin-top":$("#tagline").width()*-0.09})}sizeRegionalNavigation();d=$(document).height(),c=$(window).height()}function sizeObjects(e,t,n){n==null&&(n=0);var r=$(e),i=0;r.each(function(){$(this).css({height:"inherit"});var e=$(this).height();e>i&&(i=e+n)});r.css({height:i+"px"});r.each(function(){var e=$(t,this);e.css({"padding-top":($(this).height()-e.height())/2})})}function scrollImage(){scroll=$(window).scrollTop();if($(window).width()>600){scrollPercent=scroll/(d-c)*100;topMax=d-imageHeight;currentTop=topMax*(scroll/(d-c));$("#background-image-container").css({"-webkit-transform":"translate3d(0px, "+currentTop+"px, 0px)"});$("#background-image-container").css({"-moz-transform":"translate3d(0px, "+currentTop+"px, 0px)"})}}function sliderButtonClick(e){changeFeaturedContent(e)}function prevPost(){currentNumber--;currentNumber<1?changeFeaturedContent(numberOfPosts):changeFeaturedContent(currentNumber)}function nextPost(){currentNumber++;currentNumber>numberOfPosts?changeFeaturedContent(1):changeFeaturedContent(currentNumber)}function changeRadioButton(){currentButton&&currentButton.removeAttr("style");currentButton=$("#radio-btn-"+currentNumber);currentButton.css({"background-color":"#fff"})}function changeImage(){var e=$("#background-image-"+currentNumber).clone();$("#background-image-container").append(e);e.css({left:0});e.css({"z-index":5});if(previousImage){previousImage.css({"z-index":10});var t;previousImage.animate({prop:$(window).width()},{step:function(e,t){$(this).css("-webkit-transform","translate3d("+e+"px, 0px, 0px)");$(this).css("-moz-transform","translate3d("+e+"px, 0px, 0px)")},duration:1e3,complete:function(){$(this).remove()}},"expoEaseOut")}previousImage=e}function changePostPreview(){$("#current-post-container .post-preview").length>1&&$("#current-post-container .post-preview").first().remove();var e=$("#post-preview-"+currentNumber).clone();$("#current-post-container").append(e);if(currentPostPreview){currentAnimation1&&currentAnimation1.stop();currentAnimation2&&currentAnimation2.stop();currentAnimation1=$("#post-container").animate({height:$("#post-preview-"+currentNumber).height()+15},1e3,function(){currentAnimation1=null});currentAnimation2=$("#current-post-container").animate({height:$("#post-preview-"+currentNumber).height()+15},1e3,function(){currentAnimation2=null});currentPostPreview.animate({marginTop:-1*currentPostPreview.height()-20},1e3,function(){resizeObjects();$(this).remove()})}currentPostPreview=e}function changeFeaturedContent(e){currentNumber=e;changeRadioButton();changeImage();changePostPreview();setTimeout(resizeObjects,500)}function fadeSite(){$("#masthead").css({top:0});$("#content").css({opacity:1});$("#masthead").css({opacity:1})}function prepareTween(e,t,n){_target=e;_type=t;_time=n;_target.css({transition:_type+" "+_time});_target.css({"-webkit-transition":_type+" "+_time});$("#masthead").css({"transition-timing-function":$expoEaseOut});$("#masthead").css({"-webkit-transition-timing-function":$expoEaseOut})}function removeTweens(e){_target=e;_target.css({transition:"inherit"});_target.css({"-webkit-transition":"inherit"});$("#masthead").css({"transition-timing-function":"inherit"});$("#masthead").css({"-webkit-transition-timing-function":"inherit"})}function sizeRegionalNavigation(){imageString==null&&(imageString=$(".region").css("background-image"));$(".category-navigation .container").css({width:$(".category-navigation").width()+1});$(".category-navigation .container").each(function(){var e=$(".region",this).length;for(var t=0;t<e;t++){var n=$(this).children().eq(t);if($(window).width()>600){var r=Math.floor($(".category-navigation").width()/e-Math.ceil((e-1)*10/e));n.css({width:r})}else n.css({width:$(".category-navigation").width()});var i=n.attr("id")+"-thumb",s=imageString,o=s.replace("thumb",i);console.log(o);n.css({"background-image":o})}})}function formatRegionalNavigation(){var e=0;$(".region").each(function(){regions.push($(this));e++});var t,n;if(regions.length>4)n=3;else for(var r=3;r>0;r--)if(regions.length%r==0){n=r;break}for(var r=0;r<regions.length;r++){if(r%n==0){t=$("<div>",{"class":"container"});$(".category-navigation").append(t)}t.append(regions[r])}sizeRegionalNavigation();$(".category-navigation").append($("#category-navigation-clear"))}function initSite(){console.log("jetsetter_v1");if(jQuery.browser.mobile){console.log("handheld device");isHandheldDevice=!0}else console.log("not a handheld device");sizeImage();setTimeout(fadeSite,500);window.addEventListener("scroll",scrollImage);numberOfPosts=$(".post-preview").length;changeFeaturedContent(1);jsHeader=new jetsetterHeader;jsHeader.initHeader();formatRegionalNavigation();$(window).resize(function(){resizeObjects()})}var imageHeight,scroll=0,d,c,scrollPercent,topMax,currentTop,imageHeight,jsHeader,isHandheldDevice=!1,currentAnimation1,currentAnimation2,siteInit=!1,currentButton,currentNumber,previousImage,numberOfPosts,currentPostPreview,currentPostsSwapping=0;$expoEaseOut="cubic-bezier(0.090, 0.425, 0.115, 0.995)";var regions=[],regionGroups=[],imageString;$(document).ready(function(){initSite()});